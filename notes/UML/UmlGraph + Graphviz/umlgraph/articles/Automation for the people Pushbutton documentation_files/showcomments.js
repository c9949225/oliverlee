if(typeof (dwc)=="undefined"){dwc={};dwc.signIn="Sign in";dwc.register="register";dwc.leaveCmt="to leave a comment.";dwc.addCmts="Add comments";dwc.addCmt="Add comment";dwc.view="View";dwc.totalCmts="Total comments";dwc.postYourCmt="Post your comment";dwc.show="Show:";dwc.recentCmts="Most recent comments";dwc.allCmts="All comments";dwc.tooLongCmt="Your comment has exceeded the 1000-char limit";dwc.numCharsLeft="characters left";dwc.reportAbuse="Report abuse";dwc.postingCmt="Posting comment...";dwc.noCmt="Be the first to add a comment";
dwc.netwkErr="There is a problem in retrieving the comments.  Please refresh the page later.";dwc.btnPost="Post";dwc.enterCmt="Error:  Please add a comment.";dwc.loginErr="Your login status cannot be verified at this point. Please try again later.";dwc.postErr="Your comment cannot be posted at this time.  Please try again later.";dwc.postBy="Posted by <strong>{1}</strong> on {2}";dwc.siteId=1;dwc.lang="";dwc.notifyMsg="Notify me when a comment is added";dwc.htmlWarning="Note: HTML elements are not supported within comments."
}jQuery.fn.showComments=function(E,P,N,D){var Q=this.id||"threadShow";var G=E||"95%";var B=P||10;var K=N||"nCmts";var C=D||"icomments";var A=[];var M=0;var I=0;var H=1000;var L=5;var O=10;var F=false;var J="overlay";jQuery.noConflict();jQuery(document).ready(function(S){var h=[];var X=0;var j=0;var Z='<img id="imgPlHdr" src="//dw1.s81c.com/developerworks/i/spaces/onex/animateloader_onex.gif" />';var d=function(){A=S.makeArray(S("div.metavalue"));var n={};S.each(A,function(){var o=jQuery(this).text().split("=");
n[o[0]]=encodeURIComponent(o[1])});A=n};var i=function(n){h=[];M=S("totalCount",n).text();if(!M){M=0}S("comment",n).each(function(p){var o=a(this);h.push(o)})};var V=function(p,n){var o=(typeof n!="undefined"&&n=="true")?M:X+B;o=(M!=0&&o>M)?M:o;X+=B;X=(M!=0&&X>M)?M:X;R(0,o,function(){S("#numCmts, #numCmts2").html(""+M);S("#"+K).html(M+'&nbsp;(<a class="dw-view-comment" href="#icomments">'+dwc.view+"</a>&nbsp;|&nbsp;<a "+((F!="true")?"onclick=\"window.location='"+location.href.replace(/(#icomments)/g,"").replace(/#/g,"")+'#icomments\';showSignIn();return false;" href="#icomments"':'onclick="jQuery(\'#newCmt\').focus();return false;" href="#icomments"')+">"+dwc.addCmt+"</a>"+((F!="true")?" - "+dwc.signIn:"")+")");
if(M==0){S("#topControl, #bottomControl").hide();(j)?S("div#cmtSect").html(W()):S("div#cmtSect").html(b())}if(M>L){S("#dropdownCmts, #dropdownCmts2").show();if(typeof (S("#topControl option[value='all']").val())=="undefined"){S("#topControl select, #bottomControl select").append(S("<option></option>").val("all").html(dwc.allCmts))}}S("#imgPlHdr").remove();p()})};var m=function(n){if(k()){S.ajax({type:"POST",url:"/developerworks/forums/postcomment.jspa",data:"contentID="+A.ArticleID+"&cn=test"+((n!=undefined&&n!=null&&typeof (n)=="boolean")?"&an="+n:"")+"&cb="+encodeURIComponent(S("#newCmt").attr("value").replace(/(\n){3,}/g,"\n\n").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\[\s*((.+\s*\|\s*)?(http[s]?:\/\/|ftp:\/\/)?(www\.)?[a-zA-Z0-9-\.]+\..+(\s*.+\s*\|\s*)?)\]/g,"$1").replace(/\[\s*([0-9a-zA-Z]+([_.-]?[0-9a-zA-Z]+)*@[0-9a-zA-Z]+[0-9,a-z,A-Z,.,-]*(.){1}[a-zA-Z]{2,4})+\s*\]/g,"$1"))+"&rn="+Math.random()+"&siteID="+dwc.siteId,dataType:"xml",beforeSend:function(){S("#infoCmt").html('<p class="ibm-ind-link"><a class="ibm-error-link" href="#">'+dwc.postingCmt+"</a></p>");
S(":button#postCmt").attr("disabled",true)},complete:function(){S("#newCmt,:button#postCmt").removeAttr("disabled");S("#infoCmt").text("")},success:function(o){if(S("response",o).text()=="ok"){S("#newCmt").attr("value","");S("div#cmtSect").html("");S("#charCount").html(H);init()}else{alert(S("error",o).text())}},error:function(){alert(dwc.postErr)},timeout:60000})}};var k=function(){var n=false;S("#newCmt").attr("disabled",true);S("#newCmt").attr("value",S.trim(S("#newCmt").attr("value")));if(S("#newCmt").attr("value")==undefined||S("#newCmt").attr("value")==""){S("#infoCmt").html('<p class="ibm-ind-error"><strong>'+dwc.enterCmt+"</strong></p>");
S("#cmtHead").addClass("ibm-error");S("#newCmt").attr("disabled",false)}else{if(S("#newCmt").attr("value").length>H){S("#infoCmt").html('<p class="ibm-ind-error"><strong>'+dwc.tooLongCmt+"</strong></p>");S("#newCmt").attr("disabled",false)}else{n=true}}return n};var R=function(p,n,o){S.ajax({type:"GET",url:"/developerworks/forums/comment.jspa",data:"contentID="+A.ArticleID+"&start="+p+"&range="+n+"&rn="+Math.random()+"&siteID="+dwc.siteId,dataType:"xml",success:function(q){i(q);S("div#cmtSect").html(h.join(""))
},error:function(q){if(q.responseText.indexOf("Error 500: Cannot find a thread")==0){S("div#cmtSect").html(b())}else{j=1;S("div#cmtSect").html(W())}},complete:function(){o();(F=="true")?dwc.afterSignIn(J):dwc.afterSignOut()},async:true})};var g=function(){var n=false;S.ajax({async:false,dataType:"json",url:"/developerworks/dwwi/jsp/Auth.jsp?format=json&rn="+Math.random(),success:function(o){if(typeof (o.status)!="undefined"){n=o.status}}});return n};var a=function(n){var o="";if(S("profileurl",n).text().length>0){o='<a href="'+S("profileurl",n).text()+'">'+S("author",n).text()+"</a>"
}else{o=S("author",n).text()}return'<div class="comment"><div class="dw-icomment-container"><div class="dw-icomment-body dw-noborder"><div class="dw-icomment-body dw-noborder"><p>'+S("body",n).text()+'</p><p class="ibm-item-note-alternate dw-item-note-alternate-left">'+dwc.postBy.replace(/\{1\}/,o).replace(/\{2\}/,S("time",n).text())+'</p><p class="ibm-ind-link ibm-item-note-alternate dw-item-note-alternate-right"><a class="ibm-caution-link dw-report-abuse" href="/developerworks/forums/forum.jspa?forumID=1317" target="_blank">'+dwc.reportAbuse+'</a></p><div class="dw-clear-both"></div></div></div></div></div>'
};var b=function(){return'<div class="comment"><div class="dw-icomment-container"><table class="dw-icomment-body" cellpadding="0" cellspacing="0" width="100%"><tr><td><p>'+dwc.noCmt+"</p></td></tr></table></div></div>"};var W=function(){return'<div class="comment"><div class="dw-icomment-container"><table class="dw-icomment-body" cellpadding="0" cellspacing="0" width="100%"><tr><td><p>'+dwc.netwkErr+"</p></td></tr></table></div></div>"};var f=function(){var n='<div class="ibm-container ibm-alternate-two dw-commentbox dw-noborder"><p id="cmtHead"><label for="newCmt"><strong>'+dwc.addCmt+':</strong></label></p><div class="ibm-container-body dw-commentbox dw-noborder">';
if(F!="true"){n+='<p id="signInSect"><a onclick="showSignIn();return false;" href="#">'+dwc.signIn+'</a> or <a href="/developerworks/dwwi/DWAuthRouter?m=register&lang='+dwc.lang+"&d="+encodeURIComponent(window.location+"#"+C)+'">'+dwc.register+"</a> "+dwc.leaveCmt+"</p>"}n+="<p>"+dwc.htmlWarning+'</p><span id="infoCmt" /><form focus="name" enctype="multipart/form-data" method="post" action="" name="form" class="ibm-column-form"><p><textarea cols="120" rows="5" name="newCmt" id="newCmt" class="dw-inoperable"></textarea><br /><div id="notifiedSect"><label for="comment_notification"><span><input type="checkbox" name="comment_notification" id="comment_notification" value="1" disabled/><span id="notifyText" class="ibm-form-note">'+dwc.notifyMsg+'</span></span></label><span id="maxCharsCount" class="ibm-form-note"><span id="charCount">'+H+"</span> "+dwc.numCharsLeft+'</span></div><br /><br /></p><p class="ibm-buttons-row"><input type="button" value="'+dwc.btnPost+'" jquery1275054459750="11" name="postCmt" id="postCmt" class="ibm-btn-arrow-sec dw-btn-arrow-sec" alt="'+dwc.postYourCmt+'"/><br /><br /></p></form></div></div>';
return n};var U=function(o,s,q,p,n,r){return'<div id="'+o+'" class="ibm-container ibm-alternate-two dw-comment-totals" style="'+((r)?"":"display:none")+'"><div class="ibm-container-body"><form id="'+s+'" method="get" action=""><p><span class="dw-comment-totals-label"><strong>'+dwc.totalCmts+' (<span id="'+q+'"></span>)</strong></span><span><img src="//dw1.s81c.com/i/c.gif" width="340" height="10" alt="" /></span><span class="dw-how-many-comments-label" style="display:none" id="'+p+'"><label for="'+n+'">'+dwc.show+'</label>&nbsp;<select name="comments" id="'+n+'" class="dw-how-many-comments"><option selected="selected" value="recent">'+dwc.recentCmts+'   </option></select><input type="image" class="ibm-btn-go" name="ibm-go" value="Go" src="//dw1.s81c.com/i/v16/buttons/short-btn.gif" alt="Go"/><br /></span></p></form></div></div>'
};var T=function(){S.ajax({type:"GET",url:"/developerworks/maverick/execute/get_opt_in?",data:"content_id="+A.ArticleID,dataType:"json",success:function(n){if(n["return"]==1){I=n.hash;S("#comment_notification").show();S("#notifyText").show();S("#notifyText").removeClass("ibm-form-note");S("input[name=comment_notification]").attr("disabled",false);S("input[name=comment_notification]").attr("checked",(n.opt_in==1)?true:false)}else{S("#comment_notification").hide();S("#notifyText").hide()}},error:function(n){S("#comment_notification").hide();
S("#notifyText").hide()}})};var l=function(){S.ajax({type:"POST",url:"/developerworks/maverick/execute/save_opt_in",data:"content_id="+A.ArticleID+"&hash="+I+"&notify="+(S("input[name=comment_notification]").attr("checked")?1:0),dataType:"json"})};dwc.afterSignIn=function(n){F="true";S("#signInSect").hide();S("#newCmt").attr("disabled",false);S("#postCmt").attr("disabled",false);S("#newCmt").removeClass("dw-inoperable").addClass("dw-operable");S("#maxCharsCount").removeClass("ibm-form-note");S("#"+K).html(M+'&nbsp;(<a class="dw-view-comment" href="#icomments">'+dwc.view+"</a>&nbsp;|&nbsp;<a "+((F!="true")?'onclick="showSignIn();return false;" href="#"':'href="#icomments"')+">"+dwc.addCmt+"</a>"+((F!="true")?" - "+dwc.signIn:"")+")");
T();(n=="mf")?"":S("#newCmt").focus()};dwc.afterSignOut=function(){F=false;S("#signInSect").show();S("#newCmt").attr("disabled",true);S("#postCmt").attr("disabled",true);S("#newCmt").addClass("dw-inoperable").removeClass("dw-operable");S("#maxCharsCount").addClass("ibm-form-note");S("#"+K).html(M+'&nbsp;(<a class="dw-view-comment" href="#icomments">'+dwc.view+"</a>&nbsp;|&nbsp;<a "+((F!="true")?'onclick="showSignIn();return false;" href="#"':'href="#icomments"')+">"+dwc.addCmt+"</a>"+((F!="true")?" - "+dwc.signIn:"")+")")
};d();var c="";c+=f();c+=U("topControl","selectComments","numCmts","dropdownCmts","howManyComments",true);c+='<div id="cmtSect"></div>';c=Z+'<div id="cmtTog" style="display:none">'+c+"</div>";c+=U("bottomControl","selectComments2","numCmts2","dropdownCmts2","howManyComments2",false);S("div#"+Q).html(c);var e=function(n,o){if(typeof (o.json)!="undefined"){F=o.json.status;if(F!="true"){S("#newCmt").attr("disabled",true);S("#postCmt").attr("disabled",true)}else{J=o.json.signin_type;dwc.afterSignIn(J)
}}};if(typeof (dwsi)!="undefined"){dwsi.dwsiEvtTgt.addListener("dwsi_logged_in_onpgload",e);dwsi.dwsiEvtTgt.addListener("dwsi_logged_in",e);dwsi.dwsiEvtTgt.addListener("dwsi_logged_out",function(){dwc.afterSignOut()})}init=function(){X=0;M=0;V(function(){S("#cmtTog").show()})};init();S("#selectComments, #selectComments2").submit(function(n){(n.target.id=="selectComments")?S("#howManyComments2").val(S("#howManyComments").val()):S("#howManyComments").val(S("#howManyComments2").val());S("div#cmtSect").append(Z);
if(S("#howManyComments, #howManyComments2").val()=="all"){V(function(){},"true");if(M>=O){S("#bottomControl").show()}}else{if(S("#howManyComments, #howManyComments2").val()=="recent"){S("#bottomControl").hide();init()}}return false});var Y=function(){if(S(this).val().length>H){S(this).val(S(this).val().substring(0,H))}S("#charCount").html((H-S(this).val().length))};S("#newCmt").keydown(Y);S("#newCmt").keyup(Y);S(":button#postCmt").click(function(){S("#cmtHead").removeClass("ibm-error");l();m();return false
})});return jQuery};